{% extends 'mainpages/mainpages.layout.html.twig' %}

{% block title %}Klachten{% endblock %}
{% block active7 %}active{% endblock %}
{% block username %} {{ app.user.username }} {% endblock %}



{% block body %}
  <h5>Klachten:</h5>

  <h5 class="text-success">Klacht indienen:</h5>
  {{ form_start(form , {attr: {novalidate: 'novalidate'}}) }}
  {{ form_widget(form) }}
  <button type="submit" class="btn btn-primary btn-sm mb-5"><i class="fas fa-share-square"></i> Klacht indienen</button>
  {{ form_end(form) }}

  <hr>
  <h5 class="text-success">Openstaande klachten:</h5>
  <table class="table table-hover table-sm ">
    <thead>
    <tr>
      <th style="width: 60%">Klacht</th>
      <th style="width: 10%">Datum ingediend</th>
      <th style="width: 10%">Voltooid</th>
      <th style="width: 10%">Datum voltooid</th>
      {% if is_granted('ROLE_ADMIN') %}
      <th style="width: 8%">Voltooien</th>
      {% endif %}
    </tr>
    </thead>
    <tbody>
    {% for klacht in klachten %}
      <tr>
        <td>{{ klacht.klachtText }}</td>
        <td>{{ klacht.datumingediend|date('d-m-Y') }}</td>
        <td>{% if klacht.voltooid %} <span class="badge badge-success badge-pill">Ja</span> {% else %} <span class="badge badge-danger badge-pill">Nee</span> {% endif %}</td>
        <td>{% if klacht.datumvoltooid %}{{ klacht.datumvoltooid|date('d-m-Y') }}{% else %}-{% endif %}</td>
        {% if is_granted('ROLE_ADMIN') %}
        <td><a href="{{ path('klachtenVoltooien', {'id': klacht.id}) }}" class="btn btn-sm btn-primary {% if klacht.voltooid %} disabled {% endif %}">Voltooien</a></td>
        {% endif %}
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <hr>
  <a class="btn btn-info btn-sm my-2" onclick="this.blur();" data-toggle="collapse" href="#producten0" role="button" aria-expanded="false" aria-controls="producten0">
    <i class="fas fa-arrow-down"></i> Voltooide klachten
  </a>
  <div class="collapse my-2" id="producten0">
    <table class="table table-hover table-sm ">
      <thead>
      <tr>
        <th style="width: 60%">Klacht</th>
        <th style="width: 10%">Datum ingediend</th>
        <th style="width: 10%">Voltooid</th>
        <th style="width: 10%">Datum voltooid</th>
        {% if is_granted('ROLE_ADMIN') %}
          <th style="width: 8%">Voltooien</th>
        {% endif %}
      </tr>
      </thead>
      <tbody>
      {% for klacht in klachtenVoltooid %}
        <tr>
          <td>{{ klacht.klachtText }}</td>
          <td>{{ klacht.datumingediend|date('d-m-Y') }}</td>
          <td>{% if klacht.voltooid %} <span class="badge badge-success badge-pill">Ja</span> {% else %} <span class="badge badge-danger badge-pill">Nee</span> {% endif %}</td>
          <td>{% if klacht.datumvoltooid %}{{ klacht.datumvoltooid|date('d-m-Y') }}{% else %}-{% endif %}</td>
          {% if is_granted('ROLE_ADMIN') %}
            <td><a href="{{ path('klachtenVoltooien', {'id': klacht.id}) }}" class="btn btn-sm btn-primary {% if klacht.voltooid %} disabled {% endif %}">Voltooien</a></td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}