{% extends 'mainpages/mainpages.layout.html.twig' %}

{% block title %}Voorraad{% endblock %}
{% block active1 %}active{% endblock %}


{% block body %}

  <script>
      /* $(document).ready(function () {
           $("#myInput").on("keyup", function () {
               var value = $(this).val().toLowerCase();
               $("#myTable tr").filter(function () {
                   $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
               });
           });
       });

       $(document).ready(function () {
           $('.table').DataTable({
               "paging": true,
               "info": true,
               "searching": true,
               "pageLength": 25,
               "columnDefs": [
                   {"orderable": false, "targets": [3]}
               ]
           });
       });*/
  </script>

  {% for msg in app.session.flashBag.get('error') %}
    <div class="alert alert-danger alert-dismissible fade show">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <strong>ERROR!</strong> {{ msg }}
    </div>
  {% endfor %}
  {#Laat eventueel succes zien op de pagina#}
  {% for msg in app.session.flashBag.get('success') %}
    <div class="alert alert-success alert-dismissible fade show">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <strong>SUCCES!</strong> {{ msg }}
    </div>
  {% endfor %}



  <h5>Voorraad:</h5>

  <a href="{{ path('geldoverzichtBerekenVerkoopprijs') }}" class="btn btn-primary btn-sm my-2"><i
            class="fas fa-calculator"></i> Verkoopprijs berekenen</a>
  <a class="btn btn-primary btn-sm" href="{{ path('voorraadVerkoopProducten') }}"><i class="fas fa-shopping-cart"></i>
    Producten verkopen</a>
  <a class="btn btn-primary btn-sm" href="{{ path('afschrijvingen') }}"><i class="fas fa-edit"></i>
    Afschrijving</a>

  <h5 class="text-success">Specials:</h5>
  <table class="table table-sm table-hover table-responsive-lg">
    <thead>
    <tr>
      <th style="width: 35%">Categorie</th>
      <th style="width: 40%">Productnaam</th>
      <th style="width: 15%">Voorraad</th>
      <th style="width: 15%">Verkoop</th>
    </tr>
    </thead>
    <tbody id="myTable">
    {% for product in producten0 %}
      <tr>
        <td>{{ product.categorie }}</td>
        <td>{{ product.productnaam }}</td>
        <td>{{ product.aantalvoorraad }}
          {% if (product.aantalvoorraad < product.minimaleVoorraad) and (product.aantalvoorraad != 0) %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-warning {% endif %}badge-pill">Onder MV!</span>
          {% elseif product.aantalvoorraad == 0 %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-danger {% endif %} badge-pill">Voorraad op!</span>
          {% endif %}
          {% if product.besteld == true %} <span class="ml-2 badge badge-success badge-pill">Besteld!</span> {% endif %}
        </td>
        <td>
          {% if product.id != 78 %}
            <a class="btn btn-success {% if product.aantalvoorraad == 0 %} disabled {% endif %} btn-sm mr-2"
               href="{{ path('voorraadVerkoop', {'id': product.id}) }}"><i class="fas fa-hand-holding-usd"></i> Verkopen</a>
          {% endif %}
        </td>

      </tr>
    {% endfor %}
    </tbody>
  </table>

  <h5 class="text-success">Actieve verkoop:</h5>
  <table class="table table-sm table-hover table-responsive-lg">
    <thead>
    <tr>
      <th style="width: 35%">Categorie</th>
      <th style="width: 40%">Productnaam</th>
      <th style="width: 15%">Aantal voorraad</th>
      <th style="width: 15%">Verkoop</th>
    </tr>
    </thead>
    <tbody id="myTable">
    {% for product in producten1 %}
      <tr>
        <td>{{ product.categorie }}</td>
        <td>{{ product.productnaam }}</td>
        <td>{{ product.aantalvoorraad }}
          {% if (product.aantalvoorraad < product.minimaleVoorraad) and (product.aantalvoorraad != 0) %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-warning {% endif %}badge-pill">Onder MV!</span>
          {% elseif product.aantalvoorraad == 0 %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-danger {% endif %} badge-pill">Voorraad op!</span>
          {% endif %}
          {% if product.besteld == true %} <span class="ml-2 badge badge-success badge-pill">Besteld!</span> {% endif %}
        </td>
        <td>
          {% if product.id != 78 %}
            <a class="btn btn-success {% if product.aantalvoorraad == 0 %} disabled {% endif %} btn-sm mr-2"
               href="{{ path('voorraadVerkoop', {'id': product.id}) }}"><i class="fas fa-hand-holding-usd"></i> Verkopen</a>
          {% endif %}
        </td>

      </tr>
    {% endfor %}
    </tbody>
  </table>


  <h5 class="text-success">Shisha Pennen:</h5>
  <table class="table table-sm table-hover table-responsive-lg">
    <thead>
    <tr>
      <th style="width: 35%">Categorie</th>
      <th style="width: 40%">Productnaam</th>
      <th style="width: 15%">Voorraad</th>
      <th style="width: 15%">Verkoop</th>
    </tr>
    </thead>
    <tbody id="myTable">
    {% for product in producten2 %}
      <tr>
        <td>{{ product.categorie }}</td>
        <td>{{ product.productnaam }}</td>
        <td>{{ product.aantalvoorraad }}
          {% if (product.aantalvoorraad < product.minimaleVoorraad) and (product.aantalvoorraad != 0) %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-warning {% endif %}badge-pill">Onder MV!</span>
          {% elseif product.aantalvoorraad == 0 %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-danger {% endif %} badge-pill">Voorraad op!</span>
          {% endif %}
          {% if product.besteld == true %} <span class="ml-2 badge badge-success badge-pill">Besteld!</span> {% endif %}
        </td>
        <td>
          {% if product.id != 78 %}
            <a class="btn btn-success {% if product.aantalvoorraad == 0 %} disabled {% endif %} btn-sm mr-2"
               href="{{ path('voorraadVerkoop', {'id': product.id}) }}"><i class="fas fa-hand-holding-usd"></i> Verkopen</a>
          {% endif %}
        </td>

      </tr>
    {% endfor %}
    </tbody>
  </table>

  <h5 class="text-success">Blacklist:</h5>
  <table class="table table-sm table-hover table-responsive-lg">
    <thead>
    <tr>
      <th style="width: 35%">Categorie</th>
      <th style="width: 40%">Productnaam</th>
      <th style="width: 15%">Voorraad</th>
      <th style="width: 15%">Verkoop</th>
    </tr>
    </thead>
    <tbody id="myTable">
    {% for product in producten3 %}
      <tr>
        <td>{{ product.categorie }}</td>
        <td>{{ product.productnaam }}</td>
        <td>{{ product.aantalvoorraad }}
          {% if (product.aantalvoorraad < product.minimaleVoorraad) and (product.aantalvoorraad != 0) %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-warning {% endif %}badge-pill">Onder MV!</span>
          {% elseif product.aantalvoorraad == 0 %} <span
                  class="ml-2 badge {% if product.besteld %} badge-secondary {% else %} badge-danger {% endif %} badge-pill">Voorraad op!</span>
          {% endif %}
          {% if product.besteld == true %} <span class="ml-2 badge badge-success badge-pill">Besteld!</span> {% endif %}
        </td>
        <td>
          {% if product.id != 78 %}
            <a class="btn btn-success {% if product.aantalvoorraad == 0 %} disabled {% endif %} btn-sm mr-2"
               href="{{ path('voorraadVerkoop', {'id': product.id}) }}"><i class="fas fa-hand-holding-usd"></i> Verkopen</a>
          {% endif %}
        </td>

      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}